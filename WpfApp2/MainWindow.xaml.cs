using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Xml;

namespace WpfApp2
{

    public class Stu
    {
        public string Name { get; set; } = "";
    }

    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            this.DataContext = MainVm.Instance;
            InitializeComponent();

            this.DpiChanged += MainWindow_DpiChanged;

            //var defaultFontFamily = this.FontFamily;
            //MessageBox.Show($"默认字体：{defaultFontFamily.Source}");

           // TestHyLogoSvg();


            string versionPattern = @"^\d+\.\d+\.\d+\.\d+$";
            Regex regex = new Regex(versionPattern);

            string[] testVersions = { "1.0.0", "2.3.4", "1.0.0.0", "1.2.3.4", "a.b.c", "1.0", "a.b.c.d" };

            foreach (var version in testVersions)
            {
                Debug.WriteLine($"{version}: {regex.IsMatch(version)}");
            }


            List<int> numbers = new List<int> { 1, 2, 3, 4, 5 };
            numbers.Insert(2, 99);


            var list = new List<Stu>();
            list.Add(new Stu(){Name = "jack"});
            list.Add(new Stu() { Name = "tom" });

            var t1 = list[0];
            t1.Name = "harry";


            string sUAFilter = "adr:9.10.0~|ios:9.10.0~|adr:9.0.0~9.3.0|web:*|adr:9.4.0:huawei,xiaomi|pc:5.49.0.0~5.51.0.0|*:*|adr:9.10.0";
            if (sUAFilter.Contains("pc:"))
            {
                var kkk = sUAFilter.Split("|");
                foreach (var info in kkk)
                {
                    if (info.Contains("pc:"))
                    {
                        var trim = info.Trim();
                        if (trim.Length > 3)
                        {
                            var jj = trim.Substring(3, trim.Length - 3);
                        }
                    }
                }

                return;

                var index = sUAFilter.LastIndexOf("pc:", StringComparison.Ordinal);
                var tt = sUAFilter.Substring(index);
                var index1 = tt.IndexOf("|", StringComparison.Ordinal);

                var tt1 = tt.Substring(3, index1 - 3);

                int dd = 55000;

                if (tt1.Contains("~"))
                {
                    if (tt1.EndsWith("~"))
                    {
                        tt1 = tt1.Substring(0, tt1.Length - 1);
                    }
                    else
                    {
                        var replac1e = tt1.Replace(".", "");
                        var vec = replac1e.Split('~');
                        if (vec.Length > 1)
                        {
                            int.TryParse(vec[0], out var dd1);
                            int.TryParse(vec[1], out var dd2);
                            if (dd >= dd1 && dd <= dd2)
                            {
                                int temp = 1;
                            }
                        }
                    }
                }

                

                var replace = tt1.Replace(".", "");

                //int.TryParse(dd, out var ff);
                //int.TryParse(replace, out var ff1);

                //if (ff <= ff1)
                //{
                //    int temp = 0;
                //}
            }
        }


        private void TestHyLogoSvg()
        {
            string xaml = @"
<DrawingImage xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation"">
  <DrawingImage.Drawing>
    <DrawingGroup ClipGeometry=""M0,0 V34 H110 V0 H0 Z"">
      <GeometryDrawing Brush=""#FF969696"" Geometry=""F1 M110,34z M0,0z M44.3858,24.5178L47.5504,24.5178 47.5504,22.3876C47.5504,22.2244,47.6817,22.0923,47.844,22.0923L49.2299,22.0923C49.3923,22.0923,49.5236,22.2244,49.5236,22.3876L49.5236,27.7785C49.5236,27.9417,49.3923,28.0737,49.2299,28.0737L47.844,28.0737C47.6817,28.0737,47.5504,27.9417,47.5504,27.7785L47.5504,25.6267 44.3858,25.6267 44.3858,27.7677C44.3858,27.9309,44.2545,28.0629,44.0922,28.0629L42.7063,28.0629C42.5439,28.0629,42.4126,27.9309,42.4126,27.7677L42.4126,22.3768C42.4126,22.2136,42.5439,22.0815,42.7063,22.0815L44.0922,22.0815C44.2545,22.0815,44.3858,22.2136,44.3858,22.3768L44.3858,24.5178z"" />
      <GeometryDrawing Brush=""#FF969696"" Geometry=""F1 M110,34z M0,0z M75.8813,26.0859L77.266,26.0859C77.4282,26.0859,77.5597,26.2181,77.5597,26.3812L77.5597,27.7733C77.5597,27.9363,77.4282,28.0685,77.266,28.0685L75.8813,28.0685C75.7191,28.0685,75.5876,27.9363,75.5876,27.7733L75.5876,26.3812C75.5876,26.2181,75.7191,26.0859,75.8813,26.0859z"" />
      <GeometryDrawing Brush=""#FF969696"" Geometry=""F1 M110,34z M0,0z M55.4775,26.9645L52.8931,26.9645C52.7308,26.9645,52.5994,26.8324,52.5994,26.6692L52.5994,22.386C52.5994,22.2228,52.4681,22.0908,52.3058,22.0908L50.9199,22.0908C50.7575,22.0908,50.6262,22.2228,50.6262,22.386L50.6262,26.5972C50.6262,27.4109,51.2828,28.071,52.0921,28.071L56.2785,28.071C57.0878,28.071,57.7444,27.4109,57.7444,26.5972L57.7444,22.386C57.7444,22.2228,57.6131,22.0908,57.4507,22.0908L56.0648,22.0908C55.9025,22.0908,55.7712,22.2228,55.7712,22.386L55.7712,26.6692C55.7712,26.8324,55.6398,26.9645,55.4775,26.9645z"" />
      <GeometryDrawing Brush=""#FF969696"" Geometry=""F1 M110,34z M0,0z M61.1575,26.9645L64.0045,26.9645 64.0045,22.3872C64.0045,22.224,64.1358,22.092,64.2982,22.092L65.6841,22.092C65.8464,22.092,65.9777,22.224,65.9777,22.3872L65.9777,28.7478C65.9777,29.5615,65.3212,30.2216,64.5119,30.2216L61.1551,30.2216C60.9928,30.2216,60.8615,30.0895,60.8615,29.9263L60.8615,29.4091C60.8615,29.2459,60.9928,29.1139,61.1551,29.1139L63.7121,29.1139C63.8744,29.1139,64.0057,28.9818,64.0057,28.8186L64.0057,28.071 60.3565,28.071C59.5472,28.071,58.8906,27.4109,58.8906,26.5972L58.8906,22.386C58.8906,22.2228,59.0219,22.0908,59.1843,22.0908L60.5702,22.0908C60.7325,22.0908,60.8638,22.2228,60.8638,22.386L60.8638,26.6692C60.8638,26.8324,60.9952,26.9645,61.1575,26.9645z"" />
      <GeometryDrawing Brush=""#FF969696"" Geometry=""F1 M110,34z M0,0z M94.699,22.3866L94.699,27.7738C94.699,27.9371,94.8303,28.0691,94.9926,28.0691L96.3785,28.0691C96.5409,28.0691,96.6722,27.9371,96.6722,27.7738L96.6722,23.199 98.8125,23.199C98.9749,23.199,99.1062,23.331,99.1062,23.4943L99.1062,27.7738C99.1062,27.9371,99.2375,28.0691,99.3998,28.0691L100.786,28.0691C100.948,28.0691,101.079,27.9371,101.079,27.7738L101.079,23.199 103.195,23.199C103.357,23.199,103.488,23.331,103.488,23.4943L103.488,27.7738C103.488,27.9371,103.62,28.0691,103.782,28.0691L105.168,28.0691C105.33,28.0691,105.462,27.9371,105.462,27.7738L105.462,23.5663C105.462,22.7526,104.805,22.0925,103.996,22.0925L94.9962,22.0925C94.8339,22.0925,94.7026,22.2245,94.7026,22.3878L94.699,22.3866z"" />
      <GeometryDrawing Brush=""#FF969696"" Geometry=""F0 M110,34z M0,0z M86.5637,26.5977L86.5637,23.5663C86.5637,22.7526,87.2203,22.0925,88.0296,22.0925L92.1873,22.0925C92.9967,22.0925,93.6532,22.7526,93.6532,23.5663L93.6532,26.5977C93.6532,27.4114,92.9967,28.0715,92.1873,28.0715L88.0296,28.0715C87.2203,28.0715,86.5637,27.4114,86.5637,26.5977z M88.5358,23.4943L88.5358,26.6697C88.5358,26.833,88.6671,26.965,88.8294,26.965L91.3887,26.965C91.5511,26.965,91.6824,26.833,91.6824,26.6697L91.6824,23.4943C91.6824,23.331,91.5511,23.199,91.3887,23.199L88.8294,23.199C88.6671,23.199,88.5358,23.331,88.5358,23.4943z"" />
      <GeometryDrawing Brush=""#FF969696"" Geometry=""F1 M110,34z M0,0z M78.9175,26.5975C78.9175,27.4111,79.574,28.0712,80.3834,28.0712L85.237,28.0712C85.3994,28.0712,85.5307,27.9392,85.5307,27.776L85.5307,27.2587C85.5307,27.0955,85.3994,26.9635,85.237,26.9635L81.1832,26.9635C81.0208,26.9635,80.8895,26.8315,80.8895,26.6683L80.8895,23.4928C80.8895,23.3296,81.0208,23.1975,81.1832,23.1975L85.237,23.1975C85.3994,23.1975,85.5307,23.0655,85.5307,22.9023L85.5307,22.3851C85.5307,22.2219,85.3994,22.0898,85.237,22.0898L80.3834,22.0898C79.574,22.0898,78.9175,22.7499,78.9175,23.5636L78.9175,26.5975z"" />
      <GeometryDrawing Brush=""#FF969696"" Geometry=""F0 M110,34z M0,0z M67.8356,22.9038L67.8356,22.3878C67.8356,22.2245,67.9669,22.0925,68.1292,22.0925L72.762,22.0925C73.5714,22.0925,74.2279,22.7526,74.2279,23.5663L74.2279,26.5977C74.2279,27.4114,73.5714,28.0715,72.762,28.0715L68.6043,28.0715C67.795,28.0715,67.1384,27.4114,67.1384,26.5977L67.1384,25.5776C67.1384,24.764,67.795,24.1039,68.6043,24.1039L72.2571,24.1039 72.2571,23.4943C72.2571,23.331,72.1258,23.199,71.9634,23.199L68.1292,23.199C67.9669,23.199,67.8356,23.067,67.8356,22.9038z M69.1093,25.5056L69.1093,26.6697C69.1093,26.833,69.2406,26.965,69.4029,26.965L71.9623,26.965C72.1246,26.965,72.2559,26.833,72.2559,26.6697L72.2559,25.2104 69.4029,25.2104C69.2406,25.2104,69.1093,25.3424,69.1093,25.5056z"" />
      <GeometryDrawing Geometry=""F0 M110,34z M0,0z M31.626,8.0079C29.4403,3.96834 26.8058,2.36379 25.4497,1.77094 24.8433,1.50572 24.4935,1.67853 23.8859,1.94256 23.1327,2.27139 22.1371,2.59542 21.5988,3.11986 21.2096,3.07666 20.8181,3.04306 20.4217,3.02865 18.8377,2.97225 17.2978,3.14987 15.8271,3.5171 14.6811,2.78263 13.066,2.02896 10.8756,1.57652 10.1343,1.42411 9.37625,1.77574 9.00261,2.4382 8.24102,3.78592 7.05923,6.27375 6.77871,9.12881 4.39485,11.8891 2.90508,15.3202 2.77974,18.8617 2.4837,27.2468 9.95759,32.1433 19.3808,32.4805 28.8041,32.8165 36.5931,28.8034 36.8903,20.4182 37.0491,15.9178 35.0066,11.3394 31.626,8.0079z"">
        <GeometryDrawing.Brush>
          <LinearGradientBrush StartPoint=""4.26623,25.2403"" EndPoint=""33.0099,8.73211"" MappingMode=""Absolute"" SpreadMethod=""Pad"" Opacity=""1"">
            <GradientStop Color=""#FFFFA800"" Offset=""0"" />
            <GradientStop Color=""#FFFFA902"" Offset=""0.33"" />
            <GradientStop Color=""#FFFFAC0A"" Offset=""0.53"" />
            <GradientStop Color=""#FFFFB219"" Offset=""0.69"" />
            <GradientStop Color=""#FFFFB828"" Offset=""0.8"" />
            <GradientStop Color=""#FFFFBA28"" Offset=""0.91"" />
            <GradientStop Color=""#FFFFC228"" Offset=""0.98"" />
            <GradientStop Color=""#FFFFC728"" Offset=""1"" />
          </LinearGradientBrush>
        </GeometryDrawing.Brush>
      </GeometryDrawing>
      <GeometryDrawing Brush=""#FFFFFFFF"" Geometry=""F1 M110,34z M0,0z M22.4756,21.0268C28.2782,20.7207,33.3678,20.4523,32.7481,15.3407L32.7481,15.3419C32.0497,9.58498 25.8448,5.77104 19.7795,6.11667 13.9887,6.4467 8.73159,10.7059 8.58476,16.5348 8.44831,21.9665 13.4432,21.6222 19.1557,21.2283 19.7401,21.188 20.332,21.1472 20.9266,21.112 21.4462,21.0811 21.9637,21.0538 22.4756,21.0268z"" />
      <GeometryDrawing Brush=""#FFFFFFFF"" Geometry=""F1 M110,34z M0,0z M24.8649,25.0677C25.0977,25.3593 25.7948,26.1454 27.0029,26.6038 27.1808,26.671 27.3813,26.581 27.4529,26.4046 27.9841,25.1013 27.9686,24.1724 27.94,23.84 27.9352,23.78 27.8671,23.7476 27.817,23.7824 27.4756,24.0176 26.344,24.7304 24.9163,24.9429 24.8554,24.9513 24.8267,25.0209 24.8649,25.0689L24.8649,25.0677z"" />
      <GeometryDrawing Brush=""#FFFFFFFF"" Geometry=""F1 M110,34z M0,0z M15.0466,24.4749L15.0516,24.5072C15.0919,24.7721 15.2933,26.0973 16.1437,27.3791 16.2535,27.5459 16.4779,27.5939 16.6462,27.4871 18.1849,26.5114 18.5777,25.3881 18.5777,25.3881 18.5777,25.3881 16.3358,25.2057 15.0466,24.4749z"" />
      <GeometryDrawing Brush=""#FFBC5023"" Geometry=""F1 M110,34z M0,0z M15.7659,3.48978C15.4334,3.35959,13.5188,2.60998,11.4542,2.41928L11.453,2.41928C10.5517,2.33647 9.68389,2.77451 9.19924,3.54258 8.2105,5.1121 6.97735,8.56276 6.8019,9.05372 6.78819,9.09208 6.78093,9.11237 6.78076,9.11229 7.06845,6.23203 8.26933,3.7286 9.02854,2.39408 9.57168,1.43999 10.116,1.42199 10.8299,1.5672 13.0359,2.01605 14.6629,2.77211 15.816,3.50898 15.8124,3.508 15.7954,3.50131 15.7659,3.48978z"" />
      <GeometryDrawing Brush=""#FFBC5023"" Geometry=""F1 M110,34z M0,0z M24.0379,1.71344C24.6276,1.46142 24.8246,1.50942 25.4155,1.75785 26.7513,2.3207 29.3703,3.87844 31.5656,7.924 28.9907,4.82172 27.7516,3.80283 25.665,2.69033 24.9619,2.3147 24.2695,2.12868 23.3444,2.42031 22.4695,2.69598 21.7662,3.03973 21.6268,3.10791 21.6102,3.11601 21.6016,3.12022 21.6016,3.11997 22.1447,2.59192 23.2752,2.03987 24.0379,1.71344z"" />
      <GeometryDrawing Brush=""#FFBC5023"" Geometry=""F1 M110,34z M0,0z M21.7704,25.2885C25.1451,25.0184,26.5274,24.2336,27.5635,23.1391L27.5612,23.1391C27.7247,22.9663 28.0052,22.9771 28.1544,23.1739 28.2714,23.3287 28.2464,23.5507 28.1127,23.6911 26.9547,24.908 25.4387,25.7769 21.8313,26.0673 21.4183,26.0997 21.0172,26.1117 20.6304,26.1045 17.2498,26.0457 14.9507,24.6176 14.8444,24.5504 14.663,24.4364 14.6093,24.1952 14.7227,24.0128 14.8373,23.8303 15.076,23.7739 15.2587,23.8891 15.3097,23.9205 18.0268,25.5884 21.7704,25.2885z"" />
      <GeometryDrawing Brush=""#FFBC5023"" Geometry=""F1 M110,34z M0,0z M36.6511,22.4692C36.7824,21.8164 36.8659,21.1347 36.8922,20.4183 36.9053,20.0378 36.8994,19.6562 36.8815,19.2758 36.1079,19.0717 35.1338,18.8965 33.9891,18.8605 33.7181,18.8521 33.5987,19.1665 33.8052,19.343 35.0825,20.4351 36.0029,21.5416 36.6511,22.468L36.6511,22.4692z"" />
      <GeometryDrawing Brush=""#FFBC5023"" Geometry=""F1 M110,34z M0,0z M2.99219,21.6773C3.44938,21.3845 5.08359,20.4376 7.62502,20.1016 7.89361,20.0656 8.04282,20.3668 7.85541,20.5636 5.9359,22.5702 4.98212,24.5216 4.5488,25.5753 3.78721,24.4196 3.256,23.1163 2.99219,21.6773z"" />
      <GeometryDrawing Brush=""#FFBC5023"" Geometry=""F1 M110,34z M0,0z M6.52539,27.9146C7.30608,26.6125 8.97849,24.5927 11.5975,23.8883 11.8016,23.833 11.9867,24.0707 11.8816,24.2543 10.7058,26.3077 10.5435,29.3631 10.5267,30.5165 9.00236,29.83 7.65226,28.9587 6.52539,27.9146z"" />
      <GeometryDrawing Brush=""#FFBC5023"" Geometry=""F1 M110,34z M0,0z M35.6153,25.4156C34.9492,26.6829,34.0408,27.7786,32.939,28.7051L32.939,28.7063C32.6883,27.2818 32.1547,25.1336 31.0768,23.6479 30.9538,23.4775 31.1126,23.2206 31.3203,23.253 33.1371,23.5363 34.5851,24.4675 35.6153,25.4156z"" />
      <GeometryDrawing Brush=""#FFBC5023"" Geometry=""F1 M110,34z M0,0z M18.94,17.7076C20.3785,18.3161 25.8254,14.9102 25.7645,13.4605 25.7048,12.0119 19.8902,8.64922 18.6941,9.64171 17.498,10.6342 17.5016,17.098 18.94,17.7076z"" />
      <GeometryDrawing Brush=""#FFBC5023"" Geometry=""F0 M110,34z M0,0z M9.61498,20.2806C10.7466,21.3703,12.5575,21.7111,14.6883,21.7507L14.6871,21.7519C16.1052,21.7783 17.6642,21.6715 19.2591,21.5611 19.8428,21.5203 20.4325,21.4795 21.0258,21.4447 21.5438,21.4135 22.0595,21.3859 22.5692,21.3595 26.6935,21.1423 30.5887,20.9371 32.2849,18.9053 33.037,18.0052 33.3139,16.8351 33.1313,15.3301 32.4509,9.71604 26.4906,5.46165 19.844,5.83729 13.5483,6.19612 8.50601,10.9029 8.36276,16.5531 8.32098,18.2092 8.73043,19.4297 9.61498,20.2806z M19.8786,6.44694C20.1985,6.42894 20.5208,6.42294 20.8443,6.42894 26.1229,6.52615 31.8492,9.80965 32.5273,15.4034 32.6884,16.7307 32.4568,17.7472 31.8194,18.5104 30.2929,20.3379 26.5278,20.5361 22.5403,20.7461L22.5382,20.7462C22.4129,20.753 22.2872,20.7597 22.1612,20.7664 21.7736,20.7871 21.383,20.8079 20.9911,20.8314 20.3955,20.8662 19.8034,20.9071 19.2185,20.9479L19.208,20.9486C15.3585,21.2135 11.7251,21.4636 10.0364,19.8378 9.28312,19.1117 8.93455,18.0424 8.97156,16.5675 9.10645,11.233 13.8969,6.78777 19.8786,6.44694z"" />
      <GeometryDrawing Brush=""#FF4F4F4F"" Geometry=""F1 M110,34z M0,0z M55.4481,7.79773L48.1736,7.79773 48.1736,8.5682 57.136,8.5682C57.2996,8.5682,57.4321,8.70381,57.4321,8.86943L57.4321,9.6279C57.4321,9.79471,57.2996,9.92912,57.136,9.92912L49.2169,9.92912 49.0354,10.6264 55.4469,10.6264C55.6104,10.6264,55.7429,10.762,55.7429,10.9276L55.7429,11.5685C55.7429,11.7353,55.6104,11.8697,55.4469,11.8697L48.7107,11.8697 48.5329,12.5658 56.4604,12.5658C56.6239,12.5658,56.7564,12.7014,56.7564,12.867L56.7564,13.5342C56.7564,13.7011,56.6239,13.8355,56.4604,13.8355L46.038,13.8355C45.8374,13.8355,45.6954,13.6375,45.7563,13.443L46.1621,11.9057 45.3981,11.9057C45.2346,11.9057,45.1021,11.7701,45.1021,11.6045L45.1021,11.0548C45.1021,10.888,45.2346,10.7536,45.3981,10.7536L46.4701,10.7536 46.6695,9.92912 44.7929,9.92912 44.7929,15.518 44.7917,15.518C44.7762,17.3746 43.7174,19.0427 42.1333,19.728 41.9948,19.788 41.7812,19.734 41.706,19.602L41.4899,18.6515C41.4422,18.5387 41.4219,18.3791 41.5245,18.3023 41.9865,17.9566 42.3195,17.347 42.3243,16.4949L42.3243,8.86823C42.3243,8.70141,42.4568,8.567,42.6204,8.567L45.7061,8.567 45.7061,6.24239C45.7061,6.07557,45.8386,5.94116,46.0022,5.94116L47.8775,5.94116C48.041,5.94116,48.1736,6.07677,48.1736,6.24239L48.1736,6.54362 55.4481,6.54362C55.6116,6.54362,55.7441,6.67923,55.7441,6.84484L55.7441,7.4965C55.7441,7.66332,55.6116,7.79773,55.4481,7.79773z"" />
      <GeometryDrawing Brush=""#FF4F4F4F"" Geometry=""F0 M110,34z M0,0z M83.0148,9.15652L87.9986,9.15412 87.9986,9.15292C88.1621,9.15292,88.2946,9.28853,88.2946,9.45414L88.2946,18.3037 89.0276,18.3037C89.1911,18.3037,89.3236,18.4394,89.3236,18.605L89.3236,19.4498C89.3236,19.6167,89.1911,19.7511,89.0276,19.7511L74.5036,19.7511C74.34,19.7511,74.2075,19.6155,74.2075,19.4498L74.2075,18.605C74.2075,18.4382,74.34,18.3037,74.5036,18.3037L75.2962,18.3037 75.2962,9.45774C75.2962,9.29093,75.4287,9.15652,75.5922,9.15652L80.5474,9.15652 80.5474,8.23963 74.7757,8.23963C74.6122,8.23963,74.4797,8.10402,74.4797,7.93841L74.4797,7.16194C74.4797,6.99512,74.6122,6.86071,74.7757,6.86071L80.5474,6.86071 80.5474,6.24385C80.5474,6.07704,80.6799,5.94263,80.8434,5.94263L82.7188,5.94263C82.8823,5.94263,83.0148,6.07824,83.0148,6.24385L83.0148,6.86071 88.7864,6.86071C88.95,6.86071,89.0825,6.99632,89.0825,7.16194L89.0825,7.93841C89.0825,8.10522,88.95,8.23963,88.7864,8.23963L83.0148,8.23963 83.0148,9.15652z M84.2909,17.3929L77.7565,17.3929 77.7565,18.2989 85.8272,18.2989 85.8272,10.5294 77.7565,10.5294 77.7565,11.5075 84.2909,11.5075C84.4544,11.5075,84.5869,11.6431,84.5869,11.8088L84.5869,12.5C84.5869,12.6668,84.4544,12.8012,84.2909,12.8012L77.7565,12.8012 77.7565,13.8033 84.2909,13.8033C84.4544,13.8033,84.5869,13.9389,84.5869,14.1046L84.5869,14.7958C84.5869,14.9626,84.4544,15.0971,84.2909,15.0971L77.7565,15.0971 77.7565,16.0991 84.2909,16.0991C84.4544,16.0991,84.5869,16.2348,84.5869,16.4004L84.5869,17.0916C84.5869,17.2584,84.4544,17.3929,84.2909,17.3929z"" />
      <GeometryDrawing Brush=""#FF4F4F4F"" Geometry=""F1 M110,34z M0,0z M71.0481,7.79787L72.5045,7.79787C72.668,7.79787,72.8005,7.66346,72.8005,7.49664L72.8005,6.72017C72.8005,6.55456,72.668,6.41895,72.5045,6.41895L58.557,6.41895C58.3935,6.41895,58.261,6.55336,58.261,6.72017L58.261,7.49664C58.261,7.66226,58.3935,7.79787,58.557,7.79787L68.5544,7.79787 68.5544,12.5107 61.7395,12.5107C61.5449,12.5107,61.4029,12.3235,61.4542,12.1315L62.2802,8.99678C62.3304,8.80596,62.1895,8.61754,61.9949,8.61754L60.0122,8.61754C59.8785,8.61754,59.7615,8.70875,59.7269,8.84076L58.896,11.9934C58.6442,12.9487,59.352,13.8872,60.3249,13.8872L65.4078,13.8872C63.6112,15.8854 60.8896,17.6784 58.4078,18.7621 58.2813,18.8257 58.2562,18.9361 58.3075,19.1425 58.3338,19.2469 58.3863,19.4473 58.3863,19.4473 58.4221,19.7377 58.6728,19.7738 58.8017,19.7377 62.3375,18.7633 66.1682,16.7171 68.5556,14.0336L68.5556,18.0012C68.5556,18.1668,68.4231,18.3024,68.2596,18.3024L66.9584,18.3024C66.7949,18.3024,66.6624,18.4368,66.6624,18.6036L66.6624,19.4485C66.6624,19.6141,66.7949,19.7497,66.9584,19.7497L69.5691,19.7497C70.3856,19.7497,71.0481,19.0765,71.0481,18.246L71.0481,13.8908 73.056,13.8908C73.2195,13.8908,73.352,13.7564,73.352,13.5896L73.352,12.8131C73.352,12.6475,73.2195,12.5119,73.056,12.5119L71.0481,12.5119 71.0481,7.79787z"" />
      <GeometryDrawing Brush=""#FF4F4F4F"" Geometry=""F1 M110,34z M0,0z M46.2156,14.4956L55.4478,14.4956 55.4466,14.4944C55.6102,14.4944,55.7427,14.63,55.7427,14.7956L55.7427,18.0059C55.7427,18.1727,55.8752,18.3071,56.0387,18.3071L57.131,18.3071C57.2945,18.3071,57.427,18.4427,57.427,18.6084L57.427,19.4484C57.427,19.6152,57.2945,19.7497,57.131,19.7497L54.7543,19.7497C53.9378,19.7497,53.2752,19.0764,53.2752,18.2459L53.2752,15.8709 48.3392,15.8709C48.005,17.5487 46.8686,19.0296 45.3776,19.7293 45.2379,19.7953 45.072,19.7425 44.9944,19.6068L44.8667,19.0188C44.8201,18.8928 44.8165,18.7716 44.8977,18.6744 45.8706,17.5115 45.9195,16.5802 45.9195,15.3033 45.9195,15.2907 45.9192,15.2784 45.9189,15.2661 45.9186,15.2538 45.9183,15.2414 45.9183,15.2289L45.9195,15.2289 45.9195,14.7968C45.9195,14.63,46.052,14.4956,46.2156,14.4956z"" />
      <GeometryDrawing Brush=""#FF4F4F4F"" Geometry=""F1 M110,34z M0,0z M91.5371,6.86071L90.4603,6.86071C90.2968,6.86071,90.1643,6.99512,90.1643,7.16194L90.1643,7.93841C90.1643,8.10402,90.2968,8.23963,90.4603,8.23963L91.5383,8.23963 91.5383,13.1181 90.4603,13.1181C90.2968,13.1181,90.1643,13.2525,90.1643,13.4193L90.1643,14.1958C90.1643,14.3614,90.2968,14.497,90.4603,14.497L91.5383,14.497 91.5383,18.0037C91.5383,18.1693,91.4058,18.3049,91.2422,18.3049L90.4484,18.3049C90.2848,18.3049,90.1523,18.4394,90.1523,18.6062L90.1523,19.451C90.1523,19.6167,90.2848,19.7523,90.4484,19.7523L92.5004,19.7523C93.3169,19.7523,93.9794,19.079,93.9794,18.2485L93.9794,6.24385C93.9794,6.07824,93.8469,5.94263,93.6834,5.94263L91.8331,5.94263C91.6696,5.94263,91.5371,6.07704,91.5371,6.24385L91.5371,6.86071z"" />
      <GeometryDrawing Brush=""#FF4F4F4F"" Geometry=""F0 M110,34z M0,0z M104.004,7.7271L104.563,8.29595 104.563,8.29715C104.679,8.41476,104.679,8.60557,104.563,8.72319L103.623,9.67847 105.125,9.67847C105.289,9.67847,105.421,9.81408,105.421,9.9797L105.421,10.7562C105.421,10.923,105.289,11.0574,105.125,11.0574L103.945,11.0574 104.563,11.6863C104.679,11.8039,104.679,11.9947,104.563,12.1123L104.009,12.6751 104.995,12.6751C105.159,12.6751,105.291,12.8108,105.291,12.9764L105.291,19.4534C105.291,19.6202,105.159,19.7546,104.995,19.7546L94.9523,19.7546C94.7887,19.7546,94.6562,19.619,94.6562,19.4534L94.6562,12.9764C94.6562,12.8096,94.7887,12.6751,94.9523,12.6751L95.9383,12.6751 95.3844,12.1123C95.2686,11.9947,95.2686,11.8039,95.3844,11.6863L96.0028,11.0574 94.8222,11.0574C94.6586,11.0574,94.5261,10.9218,94.5261,10.7562L94.5261,9.9797C94.5261,9.81288,94.6586,9.67847,94.8222,9.67847L96.3239,9.67847 95.3844,8.72319C95.2686,8.60557,95.2686,8.41476,95.3844,8.29715L95.77,7.90471 95.1027,7.90471C94.9391,7.90471,94.8066,7.7691,94.8066,7.60348L94.8066,6.82701C94.8066,6.6602 94.9391,6.52579 95.1027,6.52579 95.1027,6.52579 95.9896,6.54379 97.3755,6.49938 99.7892,6.42138 101.996,6.26656 104.723,5.95094 104.892,5.93173 105.054,6.01574 105.086,6.18616L105.364,7.23865C105.397,7.41267 105.248,7.60949 105.075,7.62749 104.83,7.65269 104.481,7.68869 104.004,7.7271z M101.035,9.67607L101.771,9.67607 103.117,7.7907C102.518,7.8291,101.779,7.86391,101.035,7.88431L101.035,9.67607z M98.9119,9.67607L98.9119,7.90351 96.91,7.90351 98.1765,9.67607 98.9119,9.67607z M98.8868,11.0538L97.9449,11.0538 96.7894,12.6715 98.8868,12.6715 98.8868,11.0538z M98.8868,13.9089L96.8181,13.9089 96.8181,15.5782 98.8868,15.5782 98.8868,13.9089z M96.8181,16.8035L96.8181,18.4681 98.8868,18.4681 98.8868,16.8035 96.8181,16.8035z M101.061,18.4681L103.129,18.4681 103.129,16.8035 101.061,16.8035 101.061,18.4681z M101.061,13.9101L101.061,15.5794 103.129,15.5794 103.129,13.9101 101.061,13.9101z M101.061,12.6715L103.159,12.6715 102.004,11.0538 101.061,11.0538 101.061,12.6715z"" />
    </DrawingGroup>
  </DrawingImage.Drawing>
</DrawingImage>
";
            Stopwatch stopwatch = new Stopwatch();
            stopwatch.Start();

            using (var stringReader = new System.IO.StringReader(xaml))
            {
                using (var xmlReader = XmlReader.Create(stringReader))
                {
                    var drawingImage = (DrawingImage)XamlReader.Load(xmlReader);
                }
            }

            stopwatch.Stop();
            MessageBox.Show($"耗时: {stopwatch.ElapsedMilliseconds} 毫秒");

        }

        private void MainWindow_DpiChanged(object sender, DpiChangedEventArgs e)
        {
            if (e.NewDpi.DpiScaleX == e.OldDpi.DpiScaleX && e.NewDpi.DpiScaleY == e.OldDpi.DpiScaleY)
                return;
        }

        private void UIElement_OnMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {
            try
            {
                TreasurePopup.IsOpen = true;
            }
            catch /*(Exception exception)*/
            {
                //Console.WriteLine(exception);
                //throw;
            }
        }

        private void GiftBtn_OnClick(object sender, RoutedEventArgs e)
        {
            try
            {
                //TreasurePopup.IsOpen = true;

                MainVm.Instance.TestProp();
            }
            catch /*(Exception exception)*/
            {
                //Console.WriteLine(exception);
                //throw;
            }
        }

        bool _altKeyDown = false;
        private void MainWindow_OnPreviewKeyDown(object sender, KeyEventArgs e)
        {
            Key key = (e.Key == Key.System ? e.SystemKey : e.Key);
            if (key == Key.LeftAlt || key == Key.RightAlt || key == Key.F4)
            {
                _altKeyDown = true;
            }
            if (key == Key.F4 && _altKeyDown)
            {
                e.Handled = true;
            }
        }

        private void MainWindow_OnPreviewKeyUp(object sender, KeyEventArgs e)
        {
            Key key = (e.Key == Key.System ? e.SystemKey : e.Key);
            if (key == Key.LeftAlt || key == Key.RightAlt)
            {
                _altKeyDown = false;
                return;
            }
        }

        private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
        {
            MainVm.Instance.TestProp();
        }
    }
}
